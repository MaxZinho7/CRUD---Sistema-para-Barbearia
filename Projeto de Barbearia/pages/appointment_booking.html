<!DOCTYPE html>
<html lang="pt-BR">
<head>

</script>

    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agendar Serviço - BarberShop Manager</title>
    <link rel="stylesheet" href="../css/main.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  
  <script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fbarbershop3774back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.9"></script>
  <script type="module" src="https://static.rocket.new/rocket-shot.js?v=0.0.1"></script>
</head>
<body class="bg-background min-h-screen">
    <!-- Cabeçalho de navegação -->
    <header class="bg-surface shadow-card border-b border-border">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logotipo -->
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <svg class="h-8 w-8 text-primary" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                        </svg>
                    </div>
                    <div class="ml-3">
                        <h1 class="text-xl font-semibold text-text-primary">BarberShop Premium</h1>
                    </div>
                </div>

                <!-- Navegação -->
                <nav class="hidden md:flex space-x-8">
                    <a href="client_dashboard.html" class="text-text-secondary hover:text-primary transition-colors px-3 py-2 rounded-md hover:bg-primary-50">
                        <i class="fas fa-home mr-2"></i>Dashboard
                    </a>
                    <a href="appointment_booking.html" class="text-primary font-medium px-3 py-2 rounded-md bg-primary-50">
                        <i class="fas fa-calendar-plus mr-2"></i>Agendar
                    </a>
                </nav>

                <!-- Menu do usuário -->
                <div class="flex items-center space-x-4">
                    <div class="hidden md:block text-right">
                        <p class="text-sm font-medium text-text-primary">Max Daniel</p>
                        <p class="text-xs text-text-secondary">Cliente</p>
                    </div>
                    <div class="relative">
                        <img class="h-8 w-8 rounded-full object-cover" 
                             src="https://media-for2-1.cdn.whatsapp.net/v/t61.24694-24/534419634_1102878008392297_6406468555115329118_n.jpg?ccb=11-4&oh=01_Q5Aa3AH76PUuABYzq2tzDP8vZNy3_ZjJjSVs4StpT3_VAoOHUA&oe=6939ADF7&_nc_sid=5e03e0&_nc_cat=111" 
                             alt="Foto do perfil do cliente Max Daniel"
                             onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;">
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Conteúdo principal -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Cabeçalho da página -->
        <div class="mb-8">
            <div class="flex items-center mb-4">
                <a href="client_dashboard.html" class="text-text-secondary hover:text-primary mr-4">
                    <i class="fas fa-arrow-left"></i>
                </a>
                <h2 class="text-3xl font-bold text-text-primary">Agendar Novo Serviço</h2>
            </div>
            <p class="text-text-secondary">Escolha o serviço, barbeiro e horário desejado</p>
        </div>

        <!-- Indicador de progresso -->
        <div class="mb-8">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center">
                    <div class="flex items-center justify-center w-8 h-8 bg-primary text-white rounded-full text-sm font-medium">
                        1
                    </div>
                    <span class="ml-2 text-sm font-medium text-primary">Serviço</span>
                </div>
                <div class="flex-1 h-1 bg-secondary-200 mx-4">
                    <div class="h-1 bg-primary rounded" style="width: 0%"></div>
                </div>
                <div class="flex items-center">
                    <div class="flex items-center justify-center w-8 h-8 bg-secondary-200 text-text-secondary rounded-full text-sm font-medium">
                        2
                    </div>
                    <span class="ml-2 text-sm text-text-secondary">Barbeiro</span>
                </div>
                <div class="flex-1 h-1 bg-secondary-200 mx-4"></div>
                <div class="flex items-center">
                    <div class="flex items-center justify-center w-8 h-8 bg-secondary-200 text-text-secondary rounded-full text-sm font-medium">
                        3
                    </div>
                    <span class="ml-2 text-sm text-text-secondary">Horário</span>
                </div>
                <div class="flex-1 h-1 bg-secondary-200 mx-4"></div>
                <div class="flex items-center">
                    <div class="flex items-center justify-center w-8 h-8 bg-secondary-200 text-text-secondary rounded-full text-sm font-medium">
                        4
                    </div>
                    <span class="ml-2 text-sm text-text-secondary">Confirmação</span>

                </div>
            </div>
        </div>

       <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Área principal de agendamento -->
    <div class="lg:col-span-2">
        <!-- Etapa 1: Seleção de Serviço -->
        <section id="step-services" class="card mb-8">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-xl font-semibold text-text-primary flex items-center">
                    <i class="fas fa-cut text-primary mr-3"></i>
                    Escolha o Serviço
                </h3>
                <span class="text-sm text-text-secondary">Passo 1 de 4</span>
            </div>

            <!-- Categorias de Serviços -->
            <div class="mb-6">
                <div class="flex flex-wrap gap-2">
                    <button class="service-category-btn active px-4 py-2 rounded-lg text-sm font-medium bg-primary text-white">
                        Todos
                    </button> 
                </div>
            </div>

            <!-- Grade de Serviços -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Cartão de Serviço 1 -->
                <div class="service-card border border-border rounded-lg p-4 hover:border-primary hover:shadow-md transition-all cursor-pointer" data-service="corte-classico" data-price="25.00" data-duration="30">
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex-1">
                            <h4 class="font-semibold text-text-primary mb-1">Corte Clássico</h4>
                            <p class="text-sm text-text-secondary mb-2">Corte tradicional com acabamento profissional</p>
                            <div class="flex items-center text-xs text-text-secondary">
                                <i class="fas fa-clock mr-1"></i>
                                <span>30 min</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-lg font-bold text-primary">R$ 25,00</span>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-xs bg-secondary-100 text-text-secondary px-2 py-1 rounded">Corte</span>
                        <div class="service-check hidden">
                            <i class="fas fa-check-circle text-primary"></i>
                        </div>
                    </div>
                </div>

                <!-- Cartão de Serviço 2 -->
                <div class="service-card border border-border rounded-lg p-4 hover:border-primary hover:shadow-md transition-all cursor-pointer" data-service="corte-degrade" data-price="30.00" data-duration="45">
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex-1">
                            <h4 class="font-semibold text-text-primary mb-1">Corte Degradê</h4>
                            <p class="text-sm text-text-secondary mb-2">Corte moderno com degradê lateral</p>
                            <div class="flex items-center text-xs text-text-secondary">
                                <i class="fas fa-clock mr-1"></i>
                                <span>45 min</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-lg font-bold text-primary">R$ 30,00</span>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-xs bg-secondary-100 text-text-secondary px-2 py-1 rounded">Corte</span>
                        <div class="service-check hidden">
                            <i class="fas fa-check-circle text-primary"></i>
                        </div>
                    </div>
                </div>

                <!-- Cartão de Serviço 3 -->
                <div class="service-card border border-border rounded-lg p-4 hover:border-primary hover:shadow-md transition-all cursor-pointer" data-service="barba-completa" data-price="20.00" data-duration="30">
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex-1">
                            <h4 class="font-semibold text-text-primary mb-1">Barba Completa</h4>
                            <p class="text-sm text-text-secondary mb-2">Aparar e modelar barba com navalha</p>
                            <div class="flex items-center text-xs text-text-secondary">
                                <i class="fas fa-clock mr-1"></i>
                                <span>30 min</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-lg font-bold text-primary">R$ 20,00</span>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-xs bg-accent-100 text-accent-600 px-2 py-1 rounded">Barba</span>
                        <div class="service-check hidden">
                            <i class="fas fa-check-circle text-primary"></i>
                        </div>
                    </div>
                </div>

                <!-- Cartão de Serviço 4 -->
                <div class="service-card border border-border rounded-lg p-4 hover:border-primary hover:shadow-md transition-all cursor-pointer" data-service="combo-completo" data-price="45.00" data-duration="60">
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex-1">
                            <h4 class="font-semibold text-text-primary mb-1">Combo Completo</h4>
                            <p class="text-sm text-text-secondary mb-2">Corte + Barba + Sobrancelha</p>
                            <div class="flex items-center text-xs text-text-secondary">
                                <i class="fas fa-clock mr-1"></i>
                                <span>60 min</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-lg font-bold text-primary">R$ 45,00</span>
                            <span class="text-xs text-success-600 block">Economize R$ 10</span>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-xs bg-success-100 text-success-600 px-2 py-1 rounded">Combo</span>
                        <div class="service-check hidden">
                            <i class="fas fa-check-circle text-primary"></i>
                        </div>
                    </div>
                </div>

                <!-- Cartão de Serviço 5 -->
                <div class="service-card border border-border rounded-lg p-4 hover:border-primary hover:shadow-md transition-all cursor-pointer" data-service="corte-social" data-price="22.00" data-duration="25">
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex-1">
                            <h4 class="font-semibold text-text-primary mb-1">Corte Social</h4>
                            <p class="text-sm text-text-secondary mb-2">Corte executivo para ambiente profissional</p>
                            <div class="flex items-center text-xs text-text-secondary">
                                <i class="fas fa-clock mr-1"></i>
                                <span>25 min</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <span class="text-lg font-bold text-primary">R$ 22,00</span>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-xs bg-secondary-100 text-text-secondary px-2 py-1 rounded">Corte</span>
                        <div class="service-check hidden">
                            <i class="fas fa-check-circle text-primary"></i>
    
                                </div>
                            </div>
                        </div>

                       <!-- Cartão de Serviço 6 -->
<div class="service-card border border-border rounded-lg p-4 hover:border-primary hover:shadow-md transition-all cursor-pointer" data-service="barba-express" data-price="15.00" data-duration="20">
    <div class="flex items-start justify-between mb-3">
        <div class="flex-1">
            <h4 class="font-semibold text-text-primary mb-1">Barba Express</h4>
            <p class="text-sm text-text-secondary mb-2">Aparar e finalizar barba rapidamente</p>
            <div class="flex items-center text-xs text-text-secondary">
                <i class="fas fa-clock mr-1"></i>
                <span>20 min</span>
            </div>
        </div>
        <div class="text-right">
            <span class="text-lg font-bold text-primary">R$ 15,00</span>
        </div>
    </div>
    <div class="flex items-center justify-between">
        <span class="text-xs bg-accent-100 text-accent-600 px-2 py-1 rounded">Barba</span>
        <div class="service-check hidden">
            <i class="fas fa-check-circle text-primary"></i>
        </div>
    </div>
</div>
</div>

<div class="flex justify-end mt-6">
    <button id="next-to-barber" class="btn-primary disabled:opacity-50 disabled:cursor-not-allowed" disabled>
        Próximo: Escolher Barbeiro
        <i class="fas fa-arrow-right ml-2"></i>
    </button>
</div>
</section>

<!-- Etapa 2: Seleção de Barbeiro (inicialmente oculta) -->
<section id="step-barber" class="card mb-8 hidden">
    <div class="flex items-center justify-between mb-6">
        <h3 class="text-xl font-semibold text-text-primary flex items-center">
            <i class="fas fa-user-tie text-primary mr-3"></i>
            Escolha o Barbeiro
        </h3>
        <span class="text-sm text-text-secondary">Passo 2 de 4</span>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Cartão de Barbeiro 1 -->
        <div class="barber-card border border-border rounded-lg p-4 hover:border-primary hover:shadow-md transition-all cursor-pointer" data-barber="carlos-mendes">
            <div class="flex items-start space-x-4">
                <img class="h-16 w-16 rounded-full object-cover" 
                     src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" 
                     alt="Foto do barbeiro Carlos"
                     onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;">
                <div class="flex-1">
                    <h4 class="font-semibold text-text-primary mb-1">Carlos Mendes</h4>
                    <div class="flex items-center mb-2">
                        <div class="flex text-accent-500 text-sm mr-2">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <span class="text-sm text-text-secondary">5.0 (127 avaliações)</span>
                    </div>
                    <p class="text-sm text-text-secondary mb-2">Especialista em cortes clássicos e modernos</p>
                    <div class="flex flex-wrap gap-1">
                        <span class="text-xs bg-primary-50 text-primary px-2 py-1 rounded">Cortes</span>
                        <span class="text-xs bg-accent-50 text-accent-600 px-2 py-1 rounded">Barba</span>
                    </div>
                </div>
                <div class="barber-check hidden">
                    <i class="fas fa-check-circle text-primary text-xl"></i>
                </div>
            </div>
        </div>

        <!-- Cartão de Barbeiro 2 -->
        <div class="barber-card border border-border rounded-lg p-4 hover:border-primary hover:shadow-md transition-all cursor-pointer" data-barber="roberto-silva">
            <div class="flex items-start space-x-4">
                <img class="h-16 w-16 rounded-full object-cover" 
                     src="https://images.unsplash.com/photo-1500648767791-00dcc994a43e?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" 
                     alt="Foto do barbeiro Roberto"
                     onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;">
                <div class="flex-1">
                    <h4 class="font-semibold text-text-primary mb-1">Roberto Silva</h4>
                    <div class="flex items-center mb-2">
                        <div class="flex text-accent-500 text-sm mr-2">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="far fa-star"></i>
                        </div>
                        <span class="text-sm text-text-secondary">4.8 (89 avaliações)</span>
                    </div>
                    <p class="text-sm text-text-secondary mb-2">Especialista em degradês e estilos modernos</p>
                    <div class="flex flex-wrap gap-1">
                        <span class="text-xs bg-primary-50 text-primary px-2 py-1 rounded">Degradê</span>
                        <span class="text-xs bg-success-50 text-success-600 px-2 py-1 rounded">Moderno</span>
                    </div>
                </div>
                <div class="barber-check hidden">
                    <i class="fas fa-check-circle text-primary text-xl"></i>
                </div>
            </div>
        </div>
    </div>

    <div class="flex justify-between mt-6">
        <button id="back-to-service" class="btn-secondary">
            <i class="fas fa-arrow-left mr-2"></i>Voltar
        </button>
        <button id="next-to-schedule" class="btn-primary disabled:opacity-50 disabled:cursor-not-allowed" disabled>
            Próximo: Escolher Horário
            <i class="fas fa-arrow-right ml-2"></i>
        </button>
    </div>
</section>

<!-- Etapa 3: Seleção de Horário (inicialmente oculta) -->
<section id="step-schedule" class="card mb-8 hidden">
    <div class="flex items-center justify-between mb-6">
        <h3 class="text-xl font-semibold text-text-primary flex items-center">
            <i class="fas fa-calendar-alt text-primary mr-3"></i>
            Escolha Data e Horário
        </h3>
        <span class="text-sm text-text-secondary">Passo 3 de 4</span>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Calendário -->
        <div>
            <h4 class="font-medium text-text-primary mb-4">Selecione a Data</h4>
            <div class="border border-border rounded-lg p-4">
                <div class="flex items-center justify-between mb-4">
                    <button id="prev-month" class="p-2 hover:bg-secondary-100 rounded">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h5 class="font-semibold text-text-primary" id="current-month">Outubro 2025</h5>
                    <button id="next-month" class="p-2 hover:bg-secondary-100 rounded">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                <div class="grid grid-cols-7 gap-1 mb-2">
                    <div class="text-center text-xs font-medium text-text-secondary py-2">Dom</div>
                    <div class="text-center text-xs font-medium text-text-secondary py-2">Seg</div>
                    <div class="text-center text-xs font-medium text-text-secondary py-2">Ter</div>
                    <div class="text-center text-xs font-medium text-text-secondary py-2">Qua</div>
                    <div class="text-center text-xs font-medium text-text-secondary py-2">Qui</div>
                    <div class="text-center text-xs font-medium text-text-secondary py-2">Sex</div>
                    <div class="text-center text-xs font-medium text-text-secondary py-2">Sáb</div>
                </div>
                <div id="calendar-grid" class="grid grid-cols-7 gap-1">
                    <!-- Dias do calendário serão gerados por JavaScript -->
                </div>
            </div>
        </div>

        <!-- Horários Disponíveis -->
        <div>
            <h4 class="font-medium text-text-primary mb-4">Horários Disponíveis</h4>
            <div id="time-slots" class="space-y-2">
                <p class="text-text-secondary text-center py-8">Selecione uma data para ver os horários disponíveis</p>
            </div>
        </div>
    </div>

    <div class="flex justify-between mt-6">
        <button id="back-to-barber" class="btn-secondary">
            <i class="fas fa-arrow-left mr-2"></i>Voltar
        </button>
        <button id="next-to-confirmation" class="btn-primary disabled:opacity-50 disabled:cursor-not-allowed" disabled>
            Próximo: Confirmação
            <i class="fas fa-arrow-right ml-2"></i>
        </button>
    </div>
</section>

<!-- Etapa 4: Confirmação (inicialmente oculta) -->
<section id="step-confirmation" class="card mb-8 hidden">
    <div class="flex items-center justify-between mb-6">
        <h3 class="text-xl font-semibold text-text-primary flex items-center">
            <i class="fas fa-check-circle text-primary mr-3"></i>
            Confirmação do Agendamento
        </h3>
        <span class="text-sm text-text-secondary">Passo 4 de 4</span>
    </div>

    <!-- Resumo do Agendamento -->
    <div class="bg-secondary-50 rounded-lg p-6 mb-6">
        <h4 class="font-semibold text-text-primary mb-4">Resumo do Agendamento</h4>
        <div class="space-y-3">
            <div class="flex justify-between">
                <span class="text-text-secondary">Serviço:</span>
                <span class="font-medium text-text-primary" id="summary-service">-</span>
            </div>
            <div class="flex justify-between">
                <span class="text-text-secondary">Barbeiro:</span>
                <span class="font-medium text-text-primary" id="summary-barber">-</span>
            </div>
            <div class="flex justify-between">
                <span class="text-text-secondary">Data:</span>
                <span class="font-medium text-text-primary" id="summary-date">-</span>
            </div>
            <div class="flex justify-between">
                <span class="text-text-secondary">Horário:</span>
                <span class="font-medium text-text-primary" id="summary-time">-</span>
            </div>
            <div class="flex justify-between">
                <span class="text-text-secondary">Duração:</span>
                <span class="font-medium text-text-primary" id="summary-duration">-</span>
            </div>
            <hr class="border-border">
            <div class="flex justify-between">
                <span class="font-semibold text-text-primary">Total:</span>
                <span class="font-bold text-primary text-lg" id="summary-total">R$ 0,00</span>
            </div>
        </div>
    </div>

    <!-- Informações Adicionais -->
    <div class="space-y-4 mb-6">
        <div>
            <label class="block text-sm font-medium text-text-primary mb-2">Observações (Opcional)</label>
            <textarea id="booking-notes" class="input-field" rows="3" placeholder="Alguma preferência ou observação especial?"></textarea>
        </div>
        <div>
            <label class="block text-sm font-medium text-text-primary mb-2">Telefone para Contato</label>
            <input type="tel" id="contact-phone" class="input-field" placeholder="(11) 99999-9999">
        </div>
    </div>

    <!-- Termos e Condições -->
    <div class="bg-warning-50 border border-warning-100 rounded-lg p-4 mb-6">
        <h5 class="font-medium text-warning-600 mb-2">
            <i class="fas fa-info-circle mr-2"></i>Política de Cancelamento
        </h5>
        <ul class="text-sm text-text-secondary space-y-1">
            <li>• Cancelamentos com até 2 horas de antecedência são gratuitos</li>
            <li>• Cancelamentos com menos de 2 horas podem ser cobrados</li>
            <li>• Reagendamentos podem ser feitos até 1 hora antes</li>
        </ul>
    </div>

    <div class="flex items-center mb-6">
        <input type="checkbox" id="accept-terms" class="mr-3">
        <label for="accept-terms" class="text-sm text-text-secondary">
                           Concordo com a política de cancelamento e confirmo as informações do agendamento
                       </label>
</div>

<div class="flex justify-between">
    <button id="back-to-schedule" class="btn-secondary">
        <i class="fas fa-arrow-left mr-2"></i>Voltar
    </button>
    <button id="confirm-booking" class="btn-primary disabled:opacity-50 disabled:cursor-not-allowed" disabled>
        <i class="fas fa-check mr-2"></i>Confirmar Agendamento
    </button>
</div>
</section>
</div>

<!-- Barra Lateral de Resumo do Agendamento -->
<div class="space-y-6">
    <!-- Resumo da Seleção Atual -->
    <section class="card">
        <h3 class="text-lg font-semibold text-text-primary mb-4 flex items-center">
            <i class="fas fa-clipboard-list text-primary mr-2"></i>
            Resumo da Seleção
        </h3>
        <div class="space-y-3">
            <div id="selected-service" class="hidden">
                <div class="flex items-center justify-between p-3 bg-primary-50 rounded-lg">
                    <div>
                        <p class="font-medium text-text-primary" id="service-name">-</p>
                        <p class="text-sm text-text-secondary" id="service-duration">-</p>
                    </div>
                    <span class="font-semibold text-primary" id="service-price">-</span>
                </div>
            </div>
            <div id="selected-barber" class="hidden">
                <div class="flex items-center p-3 bg-secondary-50 rounded-lg">
                    <img id="barber-avatar" class="h-10 w-10 rounded-full object-cover mr-3" src="" alt="">
                    <div>
                        <p class="font-medium text-text-primary" id="barber-name">-</p>
                        <div class="flex items-center">
                            <div class="flex text-accent-500 text-xs mr-1" id="barber-rating">
                            </div>
                            <span class="text-xs text-text-secondary" id="barber-rating-text">-</span>
                        </div>
                    </div>
                </div>
            </div>
            <div id="selected-datetime" class="hidden">
                <div class="p-3 bg-accent-50 rounded-lg">
                    <div class="flex items-center mb-1">
                        <i class="fas fa-calendar text-accent-600 mr-2"></i>
                        <span class="font-medium text-text-primary" id="selected-date">-</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-clock text-accent-600 mr-2"></i>
                        <span class="font-medium text-text-primary" id="selected-time">-</span>
                    </div>
                </div>
            </div>
        </div>
        <div id="total-section" class="hidden mt-4 pt-4 border-t border-border">
            <div class="flex justify-between items-center">
                <span class="font-semibold text-text-primary">Total:</span>
                <span class="font-bold text-primary text-xl" id="total-price">R$ 0,00</span>
            </div>
        </div>
    </section>

    <!-- Serviços Populares -->
    <section class="card">
        <h3 class="text-lg font-semibold text-text-primary mb-4 flex items-center">
            <i class="fas fa-fire text-error mr-2"></i>
            Serviços Populares
        </h3>
        <div class="space-y-3">
            <div class="flex items-center justify-between p-2 hover:bg-secondary-50 rounded-lg transition-colors cursor-pointer">
                <div>
                    <p class="text-sm font-medium text-text-primary">Combo Completo</p>
                    <p class="text-xs text-text-secondary">Mais escolhido</p>
                </div>
                <span class="text-sm font-semibold text-primary">R$ 45,00</span>
            </div>
            <div class="flex items-center justify-between p-2 hover:bg-secondary-50 rounded-lg transition-colors cursor-pointer">
                <div>
                    <p class="text-sm font-medium text-text-primary">Corte Degradê</p>
                    <p class="text-xs text-text-secondary">Tendência</p>
                </div>
                <span class="text-sm font-semibold text-primary">R$ 30,00</span>
            </div>
            <div class="flex items-center justify-between p-2 hover:bg-secondary-50 rounded-lg transition-colors cursor-pointer">
                <div>
                    <p class="text-sm font-medium text-text-primary">Corte + Barba</p>
                    <p class="text-xs text-text-secondary">Clássico</p>
                </div>
                <span class="text-sm font-semibold text-primary">R$ 40,00</span>
            </div>
        </div>
    </section>

    <!-- Horário de Funcionamento -->
    <section class="card">
        <h3 class="text-lg font-semibold text-text-primary mb-4 flex items-center">
            <i class="fas fa-clock text-primary mr-2"></i>
            Horário de Funcionamento
        </h3>
        <div class="space-y-2 text-sm">
            <div class="flex justify-between">
                <span class="text-text-secondary">Segunda - Sexta:</span>
                <span class="text-text-primary">08:00 - 18:00</span>
            </div>
            <div class="flex justify-between">
                <span class="text-text-secondary">Sábado:</span>
                <span class="text-text-primary">08:00 - 16:00</span>
            </div>
            <div class="flex justify-between">
                <span class="text-text-secondary">Domingo:</span>
                <span class="text-error">Fechado</span>
            </div>
        </div>
    </section>
</div>
</div>
</main>

<!-- Navegação Mobile -->
<nav class="md:hidden fixed bottom-0 left-0 right-0 bg-surface border-t border-border">
    <div class="flex justify-around py-2">
        <a href="client_dashboard.html" class="flex flex-col items-center py-2 px-3 text-text-secondary">
            <i class="fas fa-home text-lg mb-1"></i>
            <span class="text-xs">Dashboard</span>
        </a>
        <a href="appointment_booking.html" class="flex flex-col items-center py-2 px-3 text-primary">
            <i class="fas fa-calendar-plus text-lg mb-1"></i>
            <span class="text-xs">Agendar</span>
        </a>
        <button class="flex flex-col items-center py-2 px-3 text-text-secondary">
            <i class="fas fa-history text-lg mb-1"></i>
            <span class="text-xs">Histórico</span>
        </button>
        <button class="flex flex-col items-center py-2 px-3 text-text-secondary">
            <i class="fas fa-user text-lg mb-1"></i>
            <span class="text-xs">Perfil</span>
        </button>
    </div>
</nav>

<!-- Modal de Sucesso -->
<div id="success-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
    <div class="bg-surface rounded-lg p-6 m-4 max-w-md w-full text-center">
        <div class="mb-4">
            <i class="fas fa-check-circle text-success text-5xl mb-4"></i>
            <h3 class="text-xl font-semibold text-text-primary mb-2">Agendamento Confirmado!</h3>
            <p class="text-text-secondary">Seu agendamento foi realizado com sucesso. Você receberá uma confirmação por WhatsApp.</p>
        </div>
        <div class="space-y-3">
            <button id="view-appointment" class="btn-primary w-full">
                Ver Agendamento
            </button>
            <button id="close-modal" class="btn-secondary w-full">
                Fechar
            </button>
        </div>
    </div>
</div>

<script>
    // Estado do agendamento
    let bookingState = {
        service: null,
        barber: null,
        date: null,
        time: null,
        step: 1
    };

    // Dados dos serviços
    const services = {
        'corte-classico': { name: 'Corte Clássico', price: 25.00, duration: 30 },
        'corte-degrade': { name: 'Corte Degradê', price: 30.00, duration: 45 },
        'barba-completa': { name: 'Barba Completa', price: 20.00, duration: 30 },
        'combo-completo': { name: 'Combo Completo', price: 45.00, duration: 60 },
        'corte-social': { name: 'Corte Social', price: 22.00, duration: 25 },
        'barba-express': { name: 'Barba Express', price: 15.00, duration: 20 }
    };

    // Dados dos barbeiros
    const barbers = {
        'carlos-mendes': { 
            name: 'Carlos Mendes', 
            rating: 5.0, 
            reviews: 127,
            avatar: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
        },
        'roberto-silva': { 
            name: 'Roberto Silva', 
            rating: 4.8, 
            reviews: 89,
            avatar: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'
        }
    };

    // Horários disponíveis
    const timeSlots = [
        '08:00', '08:30', '09:00', '09:30', '10:00', '10:30',
        '11:00', '11:30', '14:00', '14:30', '15:00', '15:30',
        '16:00', '16:30', '17:00', '17:30'
    ];

    document.addEventListener('DOMContentLoaded', function() {
        initializeBooking();
    });

    function initializeBooking() {
        // Seleção de serviço
        document.querySelectorAll('.service-card').forEach(card => {
            card.addEventListener('click', function() {
                selectService(this);
            });
        });

        // Seleção de barbeiro
        document.querySelectorAll('.barber-card').forEach(card => {
            card.addEventListener('click', function() {
                selectBarber(this);
            });
        });

        // Botões de navegação
        document.getElementById('next-to-barber').addEventListener('click', () => showStep(2));
        document.getElementById('back-to-service').addEventListener('click', () => showStep(1));
        document.getElementById('next-to-schedule').addEventListener('click', () => showStep(3));
        document.getElementById('back-to-barber').addEventListener('click', () => showStep(2));
        document.getElementById('next-to-confirmation').addEventListener('click', () => showStep(4));
        document.getElementById('back-to-schedule').addEventListener('click', () => showStep(3));

        // Confirmação
        document.getElementById('accept-terms').addEventListener('change', function() {
            document.getElementById('confirm-booking').disabled = !this.checked;
        });

        document.getElementById('confirm-booking').addEventListener('click', confirmBooking);

        // Manipuladores do modal
        document.getElementById('view-appointment').addEventListener('click', () => {
            window.location.href = 'client_dashboard.html';
        });

        document.getElementById('close-modal').addEventListener('click', () => {
            document.getElementById('success-modal').classList.add('hidden');
            document.getElementById('success-modal').classList.remove('flex');
        });

        // Inicializa o calendário
        initializeCalendar();
    }

    function selectService(card) {
        // Remove a seleção anterior
        document.querySelectorAll('.service-card').forEach(c => {
            c.classList.remove('border-primary', 'bg-primary-50');
            c.querySelector('.service-check').classList.add('hidden');
        });

        // Adiciona seleção ao cartão clicado
        card.classList.add('border-primary', 'bg-primary-50');
        card.querySelector('.service-check').classList.remove('hidden');

        // Atualiza o estado do agendamento
        const serviceId = card.dataset.service;
        bookingState.service = serviceId;

        // Atualiza o resumo lateral
        updateServiceSummary(serviceId);

        // Habilita o próximo botão
        document.getElementById('next-to-barber').disabled = false;
    }

    function selectBarber(card) {
        // Remove a seleção anterior
        document.querySelectorAll('.barber-card').forEach(c => {
            c.classList.remove('border-primary', 'bg-primary-50');
            c.querySelector('.barber-check').classList.add('hidden');
        });

        // Adiciona seleção ao cartão clicado
        card.classList.add('border-primary', 'bg-primary-50');
        card.querySelector('.barber-check').classList.remove('hidden');

        // Atualiza o estado do agendamento
        const barberId = card.dataset.barber;
        bookingState.barber = barberId;

        // Atualiza o resumo lateral
        updateBarberSummary(barberId);

        // Habilita o próximo botão
        document.getElementById('next-to-schedule').disabled = false;
    }

    function updateServiceSummary(serviceId) {
        const service = services[serviceId];
        document.getElementById('service-name').textContent = service.name;
        document.getElementById('service-duration').textContent = `${service.duration} min`;
        document.getElementById('service-price').textContent = `R$ ${service.price.toFixed(2).replace('.', ',')}`;
        document.getElementById('selected-service').classList.remove('hidden');
        updateTotal();
    }

    function updateBarberSummary(barberId) {
        const barber = barbers[barberId];
        document.getElementById('barber-name').textContent = barber.name;
        document.getElementById('barber-avatar').src = barber.avatar;
        document.getElementById('barber-avatar').alt = `Foto do barbeiro ${barber.name}`;
        
        // Atualiza as estrelas de avaliação
        const ratingContainer = document.getElementById('barber-rating');
        ratingContainer.innerHTML = '';
        for (let i = 0; i < 5; i++) {
            const star = document.createElement('i');
            star.className = i < Math.floor(barber.rating) ? 'fas fa-star' : 'far fa-star';
            ratingContainer.appendChild(star);
            
            }
            document.getElementById('barber-rating-text').textContent = barber.rating.toFixed(1);
            
            document.getElementById('selected-barber').classList.remove('hidden');
        }

        function updateTotal() {
            if (bookingState.service) {
                const service = services[bookingState.service];
                const price = `R$ ${service.price.toFixed(2).replace('.', ',')}`;
                document.getElementById('total-price').textContent = price;
                document.getElementById('total-section').classList.remove('hidden');
            }
        }

       function showStep(step) {
    // Oculta todas as etapas
    document.querySelectorAll('[id^="step-"]').forEach(section => {
        section.classList.add('hidden');
    });

    // Mostra a etapa atual
    document.getElementById(`step-${getStepName(step)}`).classList.remove('hidden');

    // Atualiza o indicador de progresso
    updateProgressIndicator(step);

    bookingState.step = step;

    // Inicializa o calendário se estiver na etapa de agendamento
    if (step === 3) {
        generateCalendar();
    }

    // Atualiza o resumo de confirmação se estiver na etapa de confirmação
    if (step === 4) {
        updateConfirmationSummary();
    }
}

function getStepName(step) {
    const steps = ['', 'services', 'barber', 'schedule', 'confirmation'];
    return steps[step];
}

function updateProgressIndicator(currentStep) {
    // Obtém o container do indicador de progresso
    const progressContainer = document.querySelector('.mb-8 .flex.items-center.justify-between.mb-4');
    if (!progressContainer) return;

    // Obtém todos os containers das etapas (divs que contêm o círculo e o texto)
    const stepContainers = progressContainer.querySelectorAll('.flex.items-center');
    
    // Obtém todas as barras de progresso
    const progressBars = document.querySelectorAll('.flex-1.h-1.bg-secondary-200.mx-4 .h-1');
    
    stepContainers.forEach((stepContainer, index) => {
        const circle = stepContainer.querySelector('div');
        const text = stepContainer.querySelector('span');
        
        // Ignora se não encontrar elementos
        if (!circle || !text) return;
        
        if (index + 1 <= currentStep) {
            circle.className = 'flex items-center justify-center w-8 h-8 bg-primary text-white rounded-full text-sm font-medium';
            text.className = 'ml-2 text-sm font-medium text-primary';
        } else {
            circle.className = 'flex items-center justify-center w-8 h-8 bg-secondary-200 text-text-secondary rounded-full text-sm font-medium';
            text.className = 'ml-2 text-sm text-text-secondary';
        }
    });

    // Atualiza o preenchimento das barras de progresso
    progressBars.forEach((bar, index) => {
        if (!bar) return;
        
        if (index + 1 < currentStep) {
            bar.style.width = '100%';
        } else if (index + 1 === currentStep) {
            bar.style.width = '50%';
        } else {
            bar.style.width = '0%';
        }
    });
}

function initializeCalendar() {
    const currentDate = new Date();
    generateCalendar(currentDate.getFullYear(), currentDate.getMonth());

    // Botão "mês anterior"
    document.getElementById('prev-month').addEventListener('click', () => {
        const currentMonthElement = document.getElementById('current-month');
        const current = new Date(
            currentMonthElement.dataset.year || new Date().getFullYear(), 
            currentMonthElement.dataset.month || new Date().getMonth()
        );
        current.setMonth(current.getMonth() - 1);
        generateCalendar(current.getFullYear(), current.getMonth());
    });

    // Botão "próximo mês"
    document.getElementById('next-month').addEventListener('click', () => {
        const currentMonthElement = document.getElementById('current-month');
        const current = new Date(
            currentMonthElement.dataset.year || new Date().getFullYear(), 
            currentMonthElement.dataset.month || new Date().getMonth()
        );
        current.setMonth(current.getMonth() + 1);
        generateCalendar(current.getFullYear(), current.getMonth());
    });
}

function generateCalendar(year = new Date().getFullYear(), month = new Date().getMonth()) {
    const monthNames = [
        'Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',
        'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'
    ];

    const currentMonthElement = document.getElementById('current-month');
    if (currentMonthElement) {
        currentMonthElement.textContent = `${monthNames[month]} ${year}`;
        currentMonthElement.dataset.year = year;
        currentMonthElement.dataset.month = month;
    }

    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();
    const today = new Date();

    const calendarGrid = document.getElementById('calendar-grid');
    if (!calendarGrid) return;
    
    calendarGrid.innerHTML = '';

    // Células vazias para os dias antes do início do mês
    for (let i = 0; i < firstDay; i++) {
        const emptyCell = document.createElement('div');
        calendarGrid.appendChild(emptyCell);
    }

    // Dias do mês
    for (let day = 1; day <= daysInMonth; day++) {
        const dayCell = document.createElement('button');
        dayCell.textContent = day;
        dayCell.className = 'p-2 text-sm hover:bg-primary-50 rounded transition-colors';

        const cellDate = new Date(year, month, day);
        
        // Desabilita datas passadas e domingos
        if (cellDate < today || cellDate.getDay() === 0) {
            dayCell.className += ' text-secondary-300 cursor-not-allowed';
            dayCell.disabled = true;
        } else {
            dayCell.className += ' text-text-primary hover:bg-primary hover:text-white cursor-pointer';
            dayCell.addEventListener('click', () => selectDate(year, month, day));
        }

        calendarGrid.appendChild(dayCell);
    }
}

function selectDate(year, month, day) {
    // Remove seleção anterior
    document.querySelectorAll('#calendar-grid button').forEach(btn => {
        btn.classList.remove('bg-primary', 'text-white');
    });

    // Adiciona seleção à data clicada
    event.target.classList.add('bg-primary', 'text-white');

    // Atualiza o estado do agendamento
    bookingState.date = new Date(year, month, day);

    // Atualiza o resumo lateral
    updateDateSummary();

    // Gera os horários disponíveis
    generateTimeSlots();
}

function updateDateSummary() {
    if (bookingState.date) {
        const dateStr = bookingState.date.toLocaleDateString('pt-BR', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
        const selectedDateElement = document.getElementById('selected-date');
        if (selectedDateElement) {
            selectedDateElement.textContent = dateStr;
        }
        
        const datetimeElement = document.getElementById('selected-datetime');
        if (datetimeElement) {
            datetimeElement.classList.remove('hidden');
        }
    }
}

function generateTimeSlots() {
    const timeSlotsContainer = document.getElementById('time-slots');
    if (!timeSlotsContainer) return;
    
    timeSlotsContainer.innerHTML = '';

    const title = document.createElement('h5');
    title.className = 'font-medium text-text-primary mb-3';
    title.textContent = 'Horários Disponíveis';
    timeSlotsContainer.appendChild(title);

    const slotsGrid = document.createElement('div');
    slotsGrid.className = 'grid grid-cols-3 gap-2';

    timeSlots.forEach(time => {
        const timeButton = document.createElement('button');
        timeButton.textContent = time;
        timeButton.className = 'p-2 text-sm border border-border rounded hover:border-primary hover:bg-primary-50 transition-colors';
        
        // Desabilita alguns horários aleatoriamente para simular ocupação
        if (Math.random() > 0.7) {
            timeButton.className += ' bg-secondary-100 text-secondary-400 cursor-not-allowed';
            timeButton.disabled = true;
        } else {
            timeButton.addEventListener('click', () => selectTime(time, timeButton));
        }

        slotsGrid.appendChild(timeButton);
    });

    timeSlotsContainer.appendChild(slotsGrid);
}

function selectTime(time, button) {
    // Remove seleção anterior
    document.querySelectorAll('#time-slots button').forEach(btn => {
        btn.classList.remove('bg-primary', 'text-white', 'border-primary');
    });

    // Adiciona seleção ao horário clicado
    button.classList.add('bg-primary', 'text-white', 'border-primary');

    // Atualiza o estado do agendamento
    bookingState.time = time;

    // Atualiza o resumo lateral
    const selectedTimeElement = document.getElementById('selected-time');
    if (selectedTimeElement) {
        selectedTimeElement.textContent = time;
    }

    // Habilita o botão "próximo"
    const nextButton = document.getElementById('next-to-confirmation');
    if (nextButton) {
        nextButton.disabled = false;
    }
}

function updateConfirmationSummary() {
    if (bookingState.service) {
        const service = services[bookingState.service];
        const summaryServiceElement = document.getElementById('summary-service');
        const summaryDurationElement = document.getElementById('summary-duration');
        const summaryTotalElement = document.getElementById('summary-total');
        
        if (summaryServiceElement) {
            summaryServiceElement.textContent = service.name;
        }
        if (summaryDurationElement) {
            summaryDurationElement.textContent = `${service.duration} minutos`;
        }
        if (summaryTotalElement) {
            summaryTotalElement.textContent = `R$ ${service.price.toFixed(2).replace('.', ',')}`;
        }
    }

    if (bookingState.barber) {
        const barber = barbers[bookingState.barber];
        const summaryBarberElement = document.getElementById('summary-barber');
        if (summaryBarberElement) {
            summaryBarberElement.textContent = barber.name;
        }
    }

    if (bookingState.date) {
        const dateStr = bookingState.date.toLocaleDateString('pt-BR');
        const summaryDateElement = document.getElementById('summary-date');
        if (summaryDateElement) {
            summaryDateElement.textContent = dateStr;
        }
    }

    if (bookingState.time) {
        const summaryTimeElement = document.getElementById('summary-time');
        if (summaryTimeElement) {
            summaryTimeElement.textContent = bookingState.time;
        }
    }
}

function confirmBooking() {
    // Mostra o modal de sucesso
    const successModal = document.getElementById('success-modal');
    if (successModal) {
        successModal.classList.remove('hidden');
        successModal.classList.add('flex');
    }

    // Reseta o estado do agendamento
    bookingState = {
        service: null,
        barber: null,
        date: null,
        time: null,
        step: 1
    };
}

    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>

<script>

    
    const usuario = JSON.parse(localStorage.getItem("usuarioLogado"));

    if (!usuario) {
        window.location.href = "./login.html";
    }

    // impedindo login errado
    const pagina = window.location.pathname;

    if (pagina.includes("barber") && usuario.tipo !== "barbeiro") {
        window.location.href = "./client_dashboard.html";
    }

    if (pagina.includes("client") && usuario.tipo !== "cliente") {
        window.location.href = "./barber_dashboard.html";
    }
</script>

<script>
    // Bloquear Back/Forward cache (bfcache)
    window.onpageshow = function(event) {
        if (event.persisted) {
            window.location.reload();
        }
    };

    
</script>

</body>

</html>
